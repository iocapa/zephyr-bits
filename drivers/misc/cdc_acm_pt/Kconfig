# Copyright (c) 2016 Wind River Systems, Inc.
# SPDX-License-Identifier: Apache-2.0

menu "USB CDC ACM UART passthrough"

config USB_CDC_ACM_PT
	bool "USB CDC ACM Class support"
	default y
	depends on SERIAL
	depends on DT_HAS_ZEPHYR_CDC_ACM_UART_PT_ENABLED
	select SERIAL_HAS_DRIVER
	select SERIAL_SUPPORT_INTERRUPT
	select RING_BUFFER
	select UART_INTERRUPT_DRIVEN
	select UART_USE_RUNTIME_CONFIGURE
	help
	  USB CDC ACM class with uart passthrough support.

if USB_CDC_ACM_PT

config CDC_ACM_PT_ACT_CALLBACK_SUPPORT
	bool "Support callbacks when there is activity on the serial line"
	help
	  If set, enables support for a callback that is invoked when data is passed.

config CDC_ACM_PT_INTERRUPT_EP_MPS
	int
	default 16
	help
	  CDC ACM class interrupt IN endpoint size

config CDC_ACM_PT_BULK_EP_MPS
	int
	default 512 if USB_DC_HAS_HS_SUPPORT
	default 64
	help
	  CDC ACM class bulk endpoints size

config CDC_ACM_PT_IAD
	bool "Force using Interface Association Descriptor"
	default CDC_ACM_IAD if USB_CDC_ACM
	default y
	help
	  IAD should not be required for non-composite CDC ACM device,
	  but Windows 7 fails to properly enumerate without it.
	  Enable if you want CDC ACM to work with Windows 7.

module = USB_CDC_ACM_PT
module-str = usb-cdc-acm-pt
source "subsys/logging/Kconfig.template.log_config"

endif # USB_CDC_ACM_PT

endmenu
